#!/bin/bash
# Version control script

# Get the current version number from the .version.txt file
version=$(cat .version.txt)

# Extract the integer part of the version
major_version=$(echo $version | cut -d '.' -f 1)

# Increase the fractional part by 0.01
minor_version=$(echo "$version + 0.01" | bc)

# Format the new version
new_version="$major_version$minor_version"

# Write the new version back to the .version.txt file
echo "$new_version" > .version.txt

# Formulate the commit message in the format vX.01
commit_message="v$new_version"

# Read the current content of readme.md
readme_content=$(cat README.md)

# Combine the commit message with the existing readme content
new_readme_content="${readme_content%$'\n'*}" # Получение текста до первого переноса строки
new_readme_content="$new_readme_content $commit_message${readme_content#* $new_readme_content}" # Добавление сообщения коммита с пробелом в конец первой строки

# Write the new content back to readme.md
echo "$new_readme_content" > README.md

# Add the commit message to the .git/COMMIT_EDITMSG file
echo "$commit_message" > "$1"

